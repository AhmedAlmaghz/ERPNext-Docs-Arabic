\n## المتطلبات الأساسية

* [حساب بريد إلكتروني] (https://docs.erpnext.com/docs/v13/user/manual/en/setting-up/email/email-account)
    
    لتلقي رسائل البريد الإلكتروني لعمليات النسخ الاحتياطي الفاشلة والناجحة ، يرجى إنشاء ** حساب بريد إلكتروني ** أولاً.
    

## إنشاء حاوية S3 وإعداد الوصول

1. أنشئ حاوية s3 جديدة.
    
    في إعدادات الحاوية ، قم بتمكين "حظر كل الوصول العام" للحفاظ على خصوصية بياناتك. لا تتردد في تمكين التشفير أو تعيين الإصدار أو قفل العنصر وفقًا لمتطلباتك (يرجى الرجوع إلى [وثائق Amazon] (https://docs.aws.amazon.com/AmazonS3/latest/user-guide/create-bucket.html)) .
    
2. فتح إدارة الهوية والوصول (IAM).
    
3. إنشاء سياسة جديدة للخدمة "S3" ، والسماح للإجراءات "ListBucket" و "PutObject".
    
    ! [لقطة شاشة من "إنشاء سياسة" في AWS] (https://docs.erpnext.com/files/s3-backup-policy.png)
    
    أو باستخدام محرر JSON:
    
    ""
    {
        "الإصدار": "2012-10-17"،
        "إفادة": [
            {
                "Sid": "VisualEditor0" ،
                "التأثير": "السماح" ،
                "فعل": [
                    "s3: PutObject"،
                    "s3: ListBucket"
                ] ،
                "المورد": [
                    "arn: aws: s3 ::: * / *" ،
                    "arn: aws: s3 ::: دفتك المستهدفة"
                ] ،
                "حالة": {
                    "عنوان IpAddress": {
                        "aws: SourceIp": "عنوان IP الخاص بالخادم"
                    }
                }
            }
        ]
    }
    ""
    
4. إنشاء مستخدم جديد للوصول الآلي.
    
    ! [لقطة شاشة لـ "إضافة مستخدم" في AWS] (https://docs.erpnext.com/files/s3_backup_add_user.png)
    
5. قم بإرفاق السياسة التي قمت بإنشائها بالمستخدم الجديد.
    
6. انسخ مفتاح وصول المستخدم والسر.
    

لحذف النسخ الاحتياطية القديمة تلقائيًا أو نقلها إلى فئة تخزين أرخص ، ألق نظرة على [إدارة دورة الحياة] (https://docs.aws.amazon.com/AmazonS3/latest/dev/object-lifecycle-mgmt.html).

## إعداد ERPNext

* افتح ** S3 Backup Settings **.
* حدد "تمكين النسخ الاحتياطي التلقائي".
* الصق مفتاح الوصول والسر من AWS.
* قم بتعيين عنوان بريد إلكتروني لتلقي إشعار عند فشل النسخ الاحتياطي. إذا كنت ترغب في الحصول على بريد إلكتروني لإجراء نسخ احتياطي ناجح أيضًا ، فقم بتمكين "إرسال بريد إلكتروني لنسخ احتياطي ناجح".
* حدد اسم الحاوية الذي قمت بإنشائه في الخطوة 1.
* اختر كم مرة تريد أن تأخذ وتحميل النسخ الاحتياطية. يمكن أن يتراوح هذا من شهري إلى يومي. إذا كنت تريد فقط عمل نسخ احتياطية يدوية ، فاضبط التردد على "بلا".

! [إعدادات النسخ الاحتياطي S3 في ERPNext] (https://docs.erpnext.com/files/s3_backup_settings.png)