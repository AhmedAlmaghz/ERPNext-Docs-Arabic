---
description: integrating erpnext with biometric attendance devices
---

# دمج ERPNext مع أجهزة الحضور البيومترية

### دمج Frappe HR مع أجهزة الحضور البيومترية

### خلفية

سجلات الحضور من جهاز المقاييس الحيوية هي سجلات تسجيل الوصول والمغادرة للموظف. لدى Frappe HR شرط لتخزين هذه السجلات في مستند يسمى Employee Checkin.

يمكن بعد ذلك وضع علامة على الحضور بناءً على سجلات [تسجيل وصول الموظف](https://docs.erpnext.com/docs/v14/user/manual/en/human-resources/employee\_checkin) و \[Shift Type]\(https: / /docs.erpnext.com/docs/v14/user/manual/en/human-resources/shift-type) للموظف باستخدام \[Auto Attendance]\(https://docs.erpnext.com/docs/v14/user / manual / en / human-resources / auto-الحضور)

وبالتالي ، يمكن دمج جهاز المقاييس الحيوية الخاص بك (_أو أي نظام تحكم في الوصول يجمع سجلات الدخول / الخروج_) ، باستخدام الخطوات التالية:

#### 1. إعداد الحضور التلقائي لتمييز الحضور من تسجيل وصول الموظف

قبل استيراد / مزامنة سجلات تسجيل الوصول والمغادرة للموظفين في نظام Frappe HR الخاص بك ، سيتعين عليك إعداد الموظفين وتحولاتهم لتتمكن من إنشاء الحضور باستخدام ميزة Auto Attendance في Frappe HR.

يرجى الرجوع إلى الرابط التالي لإعداد ميزة الحضور التلقائي: [إعداد الحضور التلقائي](https://docs.erpnext.com/docs/v14/user/manual/en/human-resources/auto-attendance)

بمجرد قيامك بإعداد سيد الموظف وتعيين ورديات للموظفين ، فأنت الآن جاهز للمتابعة إلى الخطوة التالية.

#### 2. تعبئة سجلات الضرب البيومترية في تسجيل وصول موظف Frappe HR

اعتمادًا على نظام المقاييس الحيوية الخاص بك وميزاته ، يمكن أن يكون هناك الكثير من الطرق لتعبئة سجلات Punch في Frappe HR:

1.**استخدم أداة استيراد البيانات**:

```
* سيكون أبسط حل ممكن (من حيث تعقيد التنفيذ) هو إنشاء Excel / CSV لتسجيل الوصول / المغادرة واستخدام أداة استيراد البيانات المضمنة في Frappe HR لاستيراد السجلات بشكل دوري إلى الموظف الخاص بك. وثيقة
    
* يرجى الرجوع إلى [وثائق حول أداة استيراد البيانات](https://docs.erpnext.com/docs/v14/user/manual/en/setting-up/data/data-import) لمعرفة المزيد حول كيفية القيام بذلك.
    
```

2.**تكامل API**:

```
* يمكنك أتمتة عملية مزامنة سجلات الثقب الحيوي من خلال دمجها مع واجهة برمجة التطبيقات المتاحة في Frappe HR.
    
* تتطلب هذه الطريقة بعض المعرفة التقنية وربما يجب عليك الاتصال بمنفذ Frappe HR أو بائع نظام المقاييس الحيوية.
    
* الخطوات:
    
    1. ستحتاج أولاً إلى إنشاء [مستخدم](https://docs.erpnext.com/docs/v14/user/manual/en/setting-up/users-and-permissions/adding-users) في Frappe مثيل الموارد البشرية الذي سيتم استخدامه لإنشاء السجلات لأن طريقة API هذه تتطلب تسجيل الدخول. تأكد من أن هذا المستخدم لديه جميع الأذونات المطلوبة لإنشاء تسجيل وصول الموظف.
        
    2. [إنشاء مفتاح واجهة برمجة التطبيقات وسر واجهة برمجة التطبيقات](https://docs.erpnext.com/docs/v14/user/manual/en/setting-up/users-and-permissions/adding-users#210-api-access ) للمستخدم الذي سيتم استخدامه للمصادقة.
        
    3. تأكد من تعيين [Attendance Device ID (Biometric / tag tag ID)](https://docs.erpnext.com/docs/v14/user/manual/en/human-resources/auto-attendance#3 -إعداد-الحضور-جهاز-id-field-in-الموظف) للموظفين بناءً على جهاز المقاييس الحيوية الخاص بك.
        
    4. يمكن العثور على تفاصيل تنفيذ واجهة برمجة التطبيقات [هنا](https://github.com/frappe/hrms/blob/d2529e03f92bf50efb65d3163bfcfdacbcf0b8f5/hrms/hr/doctype/employee_checkin/employee_checkin.py#L63-L109) وواجهة برمجة التطبيقات تم الوصول إليه على: `/ api / method / hrms.hr.doctype.employee_checkin.employee_checkin.add_log_based_on_employee_field`.
        
    5. يمكنك كتابة نص برمجي لإرسال طلب POST إلى API. تعثر نقطة النهاية هذه على الموظف ذي الصلة باستخدام قيمة حقل الموظف وتقوم بإنشاء تسجيل وصول للموظف. تفاصيل نقطة نهاية API:
        
        * عنوان URL: `/ api / method / hrms.hr.doctype.employee_checkin.employee_checkin.add_log_based_on_employee_field`
            
        * الطريقة: `POST`
            
        * بارامز:
            
            * `Employ_field_value`: القيمة التي يجب البحث عنها في حقل الموظف. سيكون هذا هو معرف جهاز الحضور الموجود في سجلات المقاييس الحيوية الخاصة بك وأيضًا تعيينه في سجل الموظف.
                
            * "الطابع الزمني": الطابع الزمني للسجل. متوقع حاليًا بالتنسيق التالي كسلسلة: "2022-04-08 10: 48: 08.000000"
                
            * "device_id": (اختياري) الموقع / معرف الجهاز. من المتوقع وجود سلسلة قصيرة.
                
            * `log_type`: (اختياري) اتجاه الثقب إذا كان متاحًا (IN / OUT).
                
            * `skip_auto_attendance`: (اختياري) سيتم تعيين حقل تخطي الحضور التلقائي لهذا السجل (0/1)
                
            * "اسم الحقل الموظف": (الافتراضي: "معرف_الحضور") اسم الحقل في "نوع مستند الموظف" بناءً على بحث الموظف الذي سيحدث.
                
        * الاستجابة: إرجاع كائن مستند إيداع الموظف الذي تم إدراجه.
            
```

3.**قم بإعداد برنامج نصي بيثون على جهاز الكمبيوتر الخاص بك لدمج ZKTeco أو الأجهزة المماثلة**:

```
* تعمل هذه الطريقة فقط مع ZKTeco أو الأجهزة المماثلة التي تستخدم ZKProtocol للتواصل عبر TCP / IP.
    
* هذا البرنامج النصي متاح على: [github: frappe / biometric-attance-sync-tool](https://github.com/frappe/biometric-attendance-sync-tool).
    
* يرجى اتباع التعليمات الواردة في صفحة البرنامج النصي لإعداده على جهاز الكمبيوتر الخاص بك.
    
* يسحب هذا البرنامج النصي سجلات المقاييس الحيوية من جهاز مدعوم ويستخدم واجهة برمجة التطبيقات المذكورة في الخطوة أعلاه لدفع البيانات إلى Frappe HR.
    
```

### أسئلة مكررة

#### 1. كيف أختار جهاز القياسات الحيوية المتوافق مع Frappe HR؟

إذا كنت تستخدم الطريقة 1 أو 2 ، فلا داعي للقلق بشأن التوافق.

ومع ذلك ، بالنسبة للطريقة الثالثة ، يستخدم تطبيق القياسات الحيوية للدفع داخليًا برنامجًا نصيًا متوافقًا مع الأجهزة المدرجة أعلاه [هنا](https://github.com/fananimi/pyzk#compatible-devices). عادةً ، يجب أن يعمل أي جهاز ZKTeco أو جهاز مشابه يستخدم ZKProtocol للتواصل عبر TCP / IP. بقدر ما يتعلق الأمر بشراء الجهاز ، نقترح عليك اختيار تجربة الجهاز مع البائع إن أمكن ، حيث يمكن اختبار الجهاز باستخدام أداة المزامنة ، لأنه يعتمد على عوامل متعددة عندما يتعلق الأمر بالتوافق.

#### 2. كيف أعرف الطريقة التي يجب استخدامها لدمج جهازي البيومتري مع Frappe HR؟

الطريقة الأولى ممكنة في أي موقف ولكنها تتطلب منك استيراد السجلات يدويًا بشكل دوري. تحتاج الطريقة 2 و 3 إلى بعض المراقبة وتعمل من أجل إعداد لمرة واحدة لكي تتم مزامنة السجل تلقائيًا.

**لإعداد موقع واحد:**

في نهج Push Biometric Device ، يجب أن تكون الأداة قادرة على الاتصال بجهاز المقاييس الحيوية الخاص بك عبر TCP / IP. لذلك ، عادة ما يكون الأمر هو أنه يجب تشغيله على نفس شبكة LAN مثل جهاز المقاييس الحيوية. لمزامنة هذه السجلات التي تم جلبها مع مثيل Frappe HR الخاص بك ، فإنه يستخدم وصول API. يعمل هذا بشكل أفضل عندما يكون لديك موقع واحد تم إعداده.

**لإعداد متعدد المواقع:**

في هذه الحالة ، نوصي عادةً بالطريقة الثانية حيث يقدم معظم بائعي المقاييس الحيوية خدمات لمزامنة سجلات جهاز المقاييس الحيوية من مواقع متعددة إلى Frappe HR عبر الوصول إلى واجهة برمجة التطبيقات. الطريقة الثالثة (دفع أداة الحضور البيومتري) يمكن أن تعمل أيضًا في هذه الحالة إذا كان لديك بعض المعرفة بالشبكات.
