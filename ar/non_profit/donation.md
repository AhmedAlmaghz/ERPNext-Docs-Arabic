\n## هبة

> تم تقديمه في الإصدار 13

يسمح لك نوع مستند التبرع بتسجيل تفاصيل التبرع لـ ** المتبرع **.

## 1 \. المتطلبات الأساسية

قبل إنشاء تبرع ، تحتاج إلى إنشاء [مانح] (https://docs.erpnext.com/docs/v13/user/manual/en/non_profit/donor) أولاً.

## 2 \. كيفية إنشاء تبرع

لإنشاء تبرع جديد ، انتقل إلى:

> غير ربحية> تبرع> جديد

! [تبرع] (https://docs.erpnext.com/files/donation.png)

1. حدد الجهة المانحة. سيتم جلب اسم المتبرع والبريد الإلكتروني تلقائيًا.
2. تحديد تاريخ التبرع.
3. تعيين المبلغ وطريقة الدفع.
4. حفظ وإرسال.

## 3 \. سمات

### 3.1 إدخال الدفع للتبرع

عند تقديم تبرع ، يمكنك إنشاء إدخال دفع مقابله باستخدام زر ** إنشاء إدخال دفع **.

### 3.2 RazorPay للتبرعات

يمكنك إعداد RazorPay لجمع التبرعات. يمكنك العثور على إرشادات حول إعداد razorpay [هنا] (https://docs.erpnext.com/docs/v13/user/manual/en/erpnext_integration/razorpay-integration).

يمكنك اتباع الخطوات المذكورة أدناه لإعداد Razorpay للتبرعات.

1. إعداد RazorPay
2. قم بإعداد خطاف ويب RazorPay

#### 3.2.1 إعداد RazorPay

يمكنك العثور على إرشادات حول إعداد razorpay [هنا] (https://docs.erpnext.com/docs/v13/user/manual/en/erpnext_integration/razorpay-integration).

من أجل الحصول على التبرعات ، تحتاج إلى تعيين بعض الإعدادات الافتراضية في قسم إعدادات التبرع في الإعدادات غير الربحية

1. ** الشركة الافتراضية **: سيتم تعيين هذه الشركة للتبرعات التي تم إنشاؤها عبر الويب هوك.
2. ** نوع المتبرع الافتراضي **: سيتم تعيين نوع المتبرع هذا للمانح الذي تم إنشاؤه عبر خطاف الويب للتبرع.
3. ** أتمتة إدخالات دفع التبرعات **: يمكنك تمكين هذا لإنشاء إدخال الدفع تلقائيًا لإدخال التبرع الذي تم إنشاؤه عبر الويب هوك.

إذا تم تمكين _Automate Donation Payment Entries_ ، فسيتعين عليك تعيين حساب المدين الافتراضي وحساب دفع التبرع لإدخال الدفع.

! [إعدادات التبرع] (https://docs.erpnext.com/files/donation-settings.png)

#### 3.2.2 إعداد الرد التلقائي على الويب

يمكنك إعداد خطاف ويب من لوحة تحكم RazorPay في الإعدادات. يمكنك قراءة المزيد حول الخطافات على الويب في RazorPay [هنا] (https://razorpay.com/docs/webhooks/). سيقوم خطاف الويب هذا بإعلام موقع ERPNext الخاص بك متى تم إنشاء تبرع جديد.

! [رسالة إلكترونية للتبرعات] (https://docs.erpnext.com/files/donation-webhook.png)

ستحتاج إلى التفاصيل التالية لإعداد الويب هوك.

1. ** عنوان URL الخاص بـ Webhook **: فيما يلي عنوان URL لموقع ERPNext الخاص بك. هذه هي نقطة النهاية التي ستستخدمها RazorPay للإبلاغ عن أي تبرعات جديدة تم إنشاؤها.
    
    ""
    https: // <your-site> /api/method/erpnext.non_profit.doctype.donation.donation.capture_razorpay_donations
    ""
    
2. ** Secret **: لتأمين نقطة نهاية API ، من الأفضل دائمًا إنشاء وتعيين Webhook Secret لنقطة نهاية API. للقيام بذلك ، على موقع ERPNext الخاص بك ، يمكنك النقر فوق الزر ** تبرعات> إنشاء Webhook Secret ** في إعدادات Non Profit. انسخ السر والصقه في الحقل السري في لوحة معلومات RazorPay لإعداد الخطافات على الويب.
    
3. ** الحدث **: عليك تفعيل حدث "payment.captured".
    
4. ** نشط **: حدد هذا لتمكين الويب هوك.
    

مع هذا ، يتم تنشيط الويب هوك الخاص بك.